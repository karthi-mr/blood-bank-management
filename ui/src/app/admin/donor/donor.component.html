<div class="container-fluid">
  <h1 class="text-secondary text-center my-3">Donor Details</h1>
    <app-loading *ngIf="isLoading"></app-loading>
    <div class="data" *ngIf="!isLoading">
      <nav>
        <ul class="pagination justify-content-end me-5">
          <li class="page-item" [ngClass]="!prevLink? 'disabled': ''">
            <a class="page-link" role="button" (click)="onFullPrev()">
              <i class="fa-solid fa-angles-left"></i>
            </a>
          </li>
          <li class="page-item" [ngClass]="!prevLink? 'disabled': ''">
            <a class="page-link" role="button" (click)="onPrev()">
              <i class="fa-solid fa-chevron-left"></i>
            </a>
          </li>
          <li class="page-item">
            <p class="page-link text-black">
              Page {{ page }} of {{ total }}
            </p>
          </li>
          <li class="page-item" [ngClass]="!nextLink? 'disabled': ''">
            <a class="page-link" role="button" (click)="onNext()">
              <i class="fa-solid fa-chevron-right"></i>
            </a>
          </li>
          <li class="page-item" [ngClass]="!nextLink? 'disabled': ''">
            <a class="page-link" role="button" (click)="onFullNext()">
              <i class="fa-solid fa-angles-right"></i>
            </a>
          </li>
        </ul>
      </nav>
    <table class="table table-striped table-hover table-bordered table-responsive-lg">
      <thead class="table-danger">
        <tr>
          <th scope="col">
            Username
            <div class="sort-dropdown" 
                  [ngClass]="sortOrder.includes('username')? 'text-success': ''">
              <i class="fa-solid fa-caret-down"
                  role="button"
                  data-bs-toggle="dropdown">
              </i>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('username')">
                    Sort By Asc
                    <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='username'">
                    </i>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('-username')">
                     Sort By Desc
                     <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='-username'">
                    </i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th scope="col">
            Email
            <div class="sort-dropdown" 
                  [ngClass]="sortOrder.includes('email')? 'text-success': ''">
              <i class="fa-solid fa-caret-down"
                  role="button"
                  data-bs-toggle="dropdown">
              </i>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('email')">
                    Sort By Asc
                    <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='email'">
                    </i>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('-email')">
                    Sort By Desc
                    <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='-email'">
                    </i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th scope="col">Mobile Number</th>
          <th scope="col">
            Last Login
            <div class="sort-dropdown" 
                  [ngClass]="sortOrder.includes('last_login')? 'text-success': ''">
              <i class="fa-solid fa-caret-down"
                  role="button"
                  data-bs-toggle="dropdown">
              </i>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('last_login')">
                    Sort By Asc
                    <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='last_login'">
                    </i>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('-last_login')">
                    Sort By Desc
                    <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='-last_login'">
                    </i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th scope="col">
            Blood Group
            <div class="sort-dropdown" 
                  [ngClass]="sortOrder.includes('blood_group')? 'text-success': ''">
              <i class="fa-solid fa-caret-down"
                  role="button"
                  data-bs-toggle="dropdown">
              </i>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('blood_group')">
                    Sort By Asc
                    <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='blood_group'">
                    </i>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" 
                     href="javascript:void(0)"
                     role="button"
                     (click)="loadData('-blood_group')">
                    Sort By Desc
                    <i class="fa-solid fa-check text-success"
                        *ngIf="sortOrder=='-blood_group'">
                    </i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <tr *ngFor="let donor of donors">
          <td>{{ donor.user.username }}</td>
          <td>{{ donor.user.email }}</td>
          <td>{{ donor.user.mobile }}</td>
          <td *ngIf="donor.user.last_login">
            {{ donor.user.last_login | customDate }}
          </td>
          <td *ngIf="!donor.user.last_login">Not Login</td>
          <td>{{ donor.blood_group.blood_group }}</td>
          <td>
            <button type="button" 
                    class="btn btn-success me-2"
                    (click)="onViewDonor(donor.id)">
              <i class="fa-solid fa-eye"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>